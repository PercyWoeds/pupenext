 <% if update_access? %>
  <%= button_to t('Liitä ostolaskun tiliöinti'), commodity_purchase_orders_path(@commodity), method: :get %>
  <%= button_to t('Liitä tositteen tiliöinti'), commodity_vouchers_path(@commodity), method: :get %>

  <% if @commodity.activated? %>
    <br/><br/>
    <%= form_tag(commodity_generate_rows_path(@commodity), method: "post") do %>
      <%= label_tag :selected_fiscal_year, t('Valitse tilikausi') + ':' %>
      <%= select_tag :selected_fiscal_year, options_for_select(@commodity.company.fiscal_years.reverse.map {|tilikausi| ["#{tilikausi.tilikausi_alku} - #{tilikausi.tilikausi_loppu}", tilikausi.tunnus]} ) %>
      <%= submit_tag(t('Luo poistoerät')) %>
    <% end %>
  <% else %>
    <%= button_to t('Aktivoi hyödyke'), commodity_activate_path(@commodity), method: :post %>
  <% end %>

  <br/><br/>
<% end %>

<%= render "administration/form_errors", resource: @commodity %>

<%= form_for(@commodity, url: commodity_path(@commodity)) do |f| %>
  <table>
    <tr>
      <th><%= f.label :name, t('Nimi') %></th>
      <td><%= f.text_field :name %></td>
    </tr>
    <tr>
      <th><%= f.label :description, t('Kuvaus') %></th>
      <td><%= f.text_field :description %></td>
    </tr>
    <tr>
      <th><%= f.label :amount, t('Summa') %></th>
      <td><%= @commodity.amount %></td>
    </tr>
    <tr>
      <th><%= t('Arvo nyt') %></th>
      <td><%= @commodity.bookkeeping_value(Time.now) %></td>
    </tr>
    <tr>
      <th><%= t('Arvo tilikauden lopussa') %></th>
      <td><%= @commodity.bookkeeping_value %></td>
    </tr>
    <tr>
      <th><%= f.label :cost_centre, t('Kustannuspaikka') %></th>
      <td><%= @commodity.procurement_cost_centres %></td>
    </tr>
    <tr>
      <th><%= f.label :target, t('Kohde') %></th>
      <td><%= @commodity.procurement_targets %></td>
    </tr>
    <tr>
      <th><%= f.label :project, t('Projekti') %></th>
      <td><%= @commodity.procurement_projects %></td>
    </tr>
    <tr>
      <th><%= t('Tili') %></th>
      <td><%= @commodity.fixed_assets_account %></td>
    </tr>
    <tr>
      <th><%= f.label :activated_at, t('Aktivointipäivä') %></th>
      <% if @commodity.activated? %>
        <td><%= @commodity.activated_at %></td>
      <% else %>
        <td><%= f.date_field :activated_at %></td>
      <% end %>
    </tr>
    <tr>
      <th><%= f.label :status, t('Status') %></th>
      <td><%= f.select :status, options_for_select(FixedAssets::Commodity.options_for_status, @commodity.status), {}, {:disabled => true} %></td>
    </tr>
      <th><%= f.label :planned_depreciation_type, t('SUMU poistotyyppi') %></th>
      <td><%= f.select :planned_depreciation_type, options_for_select(FixedAssets::Commodity.options_for_type, @commodity.planned_depreciation_type) %></td>
    </tr>
    <tr>
      <th><%= f.label :planned_depreciation_amount, t('SUMU poistomäärä') %></th>
      <td><%= f.text_field :planned_depreciation_amount, value: @commodity.planned_depreciation_amount %></td>
    </tr>
    <tr>
      <th><%= f.label :btl_depreciation_type, t('EVL poistotyyppi') %></th>
      <td><%= f.select :btl_depreciation_type, options_for_select(FixedAssets::Commodity.options_for_type, @commodity.btl_depreciation_type) %></td>
    </tr>
    <tr>
      <th><%= f.label :btl_depreciation_amount, t('EVL poistomäärä') %></th>
      <td><%= f.text_field :btl_depreciation_amount, value: @commodity.btl_depreciation_amount %></td>
    </tr>
    <tr>
      <th><%= t('Laatija') %></th>
      <td><%= @commodity.created_by %></td>
    </tr>
    <tr>
      <th><%= t('Luontipäivä') %></th>
      <td><%= @commodity.created_at %></td>
    </tr>
    <tr>
      <th><%= t('Muuttaja') %></th>
      <td><%= @commodity.modified_by %></td>
    </tr>
    <tr>
      <th><%= t('Muutospäivä') %></th>
      <td><%= @commodity.updated_at %></td>
    </tr>
  </table>
  <br/>
  <div class="actions">
    <%= f.submit t('Tallenna'), disable_with: t('Tallentaa') + '...' %>
  </div>
<% end %>

<%= render 'procurement_rows', resource: @commodity if @commodity.procurement_rows.present? %>
<%= render 'depreciations',    resource: @commodity if @commodity.voucher.present? %>
<%= render 'commodity_rows',   resource: @commodity if @commodity.commodity_rows.present? %>

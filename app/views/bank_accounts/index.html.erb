<%= render "administration/header", title: "Yrityksen pankkitilit" %>

<% if update_access? %>
  <%= button_to t("Uusi yrityksen pankkitili"), new_bank_account_path, method: :get %>
<% end %>

<%= form_tag bank_accounts_path, method: :get do %>
  <% if params[:not_used] == "yes" %>
    <%= hidden_field_tag :not_used, :no %>
    <%= submit_tag t("Piilota poistetut") %>
  <% else %>
    <%= hidden_field_tag :not_used, :yes %>
    <%= submit_tag t("Näytä poistetut") %>
  <% end %>
<% end %>

<br/><br/>

<%= form_tag bank_accounts_path, method: :get do %>
  <table>
    <tr>
      <th>
        <%= sortable :nimi %>
        <br/>
        <%= text_field_tag :nimi, params[:nimi] %>
      </th>

      <th>
        <%= sortable :iban %>
        <br/>
        <%= text_field_tag :iban, params[:iban] %>
      </th>

      <th>
        <%= sortable :maksulimitti %>
        <br/>
        <%= text_field_tag :maksulimitti, params[:maksulimitti] %>
      </th>

      <th>
        <%= sortable :oletus_kulutili %>
        <br/>
        <%= text_field_tag :oletus_kulutili, params[:oletus_kulutili] %>
      </th>

      <th>
        <%= sortable :oletus_rahatili %>
        <br/>
        <%= text_field_tag :oletus_rahatili, params[:oletus_rahatili] %>
      </th>

      <th>
        <%= sortable :oletus_selvittelytili %>
        <br/>
        <%= text_field_tag :oletus_selvittelytili, params[:oletus_selvittelytili] %>
      </th>

      <th class="back">
        <%= submit_tag t('Etsi') %>
      </th>
    </tr>

    <% @bank_accounts.each do |bank_account| %>
      <% classes = bank_account.in_use? ? "" : " class=line-through" %>
      <tr class="aktiivi">
        <td><%= link_to bank_account.nimi, edit_bank_account_path(bank_account) %></td>
        <td<%= classes %>>
          <%= bank_account.iban.empty? ? bank_account.tilino : bank_account.iban %>
        </td>
        <td<%= classes %>><%= bank_account.maksulimitti %></td>
        <td<%= classes %>><%= bank_account.oletus_kulutili %></td>
        <td<%= classes %>><%= bank_account.oletus_rahatili %></td>
        <td<%= classes %>><%= bank_account.oletus_selvittelytili %></td>
      </tr>
    <% end %>
  </table>
<% end %>

<br/>

<%= button_to t("Uusi yrityksen pankkitili"), new_bank_account_path, method: :get %>
